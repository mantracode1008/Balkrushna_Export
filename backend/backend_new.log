[dotenv@17.2.3] injecting env (6) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
(node:15732) [SEQUELIZE0004] DeprecationWarning: A boolean value was passed to options.operatorsAliases. This is a no-op with v5 and should be removed.
(Use `node --trace-deprecation ...` to show where the warning was created)
Server is running on port 8080.
Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='admins';
Executing (default): CREATE TABLE IF NOT EXISTS `admins` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `username` VARCHAR(255) NOT NULL UNIQUE, `password` VARCHAR(255) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
Executing (default): PRAGMA INDEX_LIST(`admins`)
Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_admins_1`)
Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='diamonds';
Executing (default): CREATE TABLE IF NOT EXISTS `diamonds` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `certificate` VARCHAR(255) NOT NULL UNIQUE, `shape` VARCHAR(255), `carat` DECIMAL(10,2), `color` VARCHAR(255), `clarity` VARCHAR(255), `cut` VARCHAR(255), `lab` VARCHAR(255), `polish` VARCHAR(255), `symmetry` VARCHAR(255), `fluorescence` VARCHAR(255), `crown_height` VARCHAR(255), `pavilion_depth` VARCHAR(255), `girdle_thickness` VARCHAR(255), `culet` VARCHAR(255), `total_depth_percent` VARCHAR(255), `table_percent` VARCHAR(255), `comments` TEXT, `inscription` VARCHAR(255), `price` DECIMAL(10,2) NOT NULL, `commission` DECIMAL(10,2) DEFAULT 0, `status` TEXT DEFAULT 'in_stock', `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
Executing (default): PRAGMA INDEX_LIST(`diamonds`)
Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_diamonds_1`)
Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='invoices';
Executing (default): CREATE TABLE IF NOT EXISTS `invoices` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `invoice_date` DATETIME, `customer_name` VARCHAR(255), `total_amount` DECIMAL(10,2), `total_profit` DECIMAL(10,2), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
Executing (default): PRAGMA INDEX_LIST(`invoices`)
Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='invoice_items';
Executing (default): CREATE TABLE IF NOT EXISTS `invoice_items` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `sale_price` DECIMAL(10,2) NOT NULL, `commission` DECIMAL(10,2) DEFAULT 0, `profit` DECIMAL(10,2) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `invoiceId` INTEGER REFERENCES `invoices` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `saleItemId` INTEGER REFERENCES `diamonds` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `diamondId` INTEGER REFERENCES `diamonds` (`id`) ON DELETE SET NULL ON UPDATE CASCADE);
Executing (default): PRAGMA INDEX_LIST(`invoice_items`)
Drop and re-sync db.
Executing (default): SELECT `id`, `username`, `password`, `createdAt`, `updatedAt` FROM `admins` AS `admin` WHERE `admin`.`username` = 'admin';
Executing (default): INSERT INTO `admins` (`id`,`username`,`password`,`createdAt`,`updatedAt`) VALUES (NULL,$1,$2,$3,$4);
Initial admin created
Executing (default): SELECT `id`, `certificate`, `shape`, `carat`, `color`, `clarity`, `cut`, `lab`, `polish`, `symmetry`, `fluorescence`, `crown_height`, `pavilion_depth`, `girdle_thickness`, `culet`, `total_depth_percent`, `table_percent`, `comments`, `inscription`, `price`, `commission`, `status`, `createdAt`, `updatedAt` FROM `diamonds` AS `diamond`;
Executing (default): SELECT `id`, `certificate`, `shape`, `carat`, `color`, `clarity`, `cut`, `lab`, `polish`, `symmetry`, `fluorescence`, `crown_height`, `pavilion_depth`, `girdle_thickness`, `culet`, `total_depth_percent`, `table_percent`, `comments`, `inscription`, `price`, `commission`, `status`, `createdAt`, `updatedAt` FROM `diamonds` AS `diamond`;
IGI API Response: [
  {
    "REPORT NUMBER": "LG591342926",
    "REPORT DATE": "July 21, 2023",
    "DESCRIPTION": "LABORATORY GROWN DIAMOND",
    "SHAPE AND CUT": "PRINCESS CUT",
    "CARAT WEIGHT": "1.07 Carat",
    "COLOR GRADE": "D",
    "CLARITY GRADE": "VVS 2",
    "CUT GRADE": "",
    "POLISH": "EXCELLENT",
    "SYMMETRY": "EXCELLENT",
    "Measurements": "5.57 x 5.53 x 3.98 mm",
    "Table Size": "69%",
    "Crown Height": "13% - 43.2¬∞",
    "Pavilion Depth": "56% - 38.3¬∞",
    "Girdle Thickness": "THIN TO MEDIUM",
    "Culet": "POINTED",
    "Total Depth": "72%",
    "FLUORESCENCE": "NONE",
    "COMMENTS": "As Grown - No indication of post-growth treatment\r\nThis Laboratory Grown Diamond was created by High Pressure High Temperature (HPHT) growth process\r\nType II\r\n",
    "Inscription(s)": "IGI LG591342926<br>",
    "REPORT_SUF": "LEGAL",
    "PDF_FLAG": "Y",
    "REPORT1_PDF": "FRD591342926.pdf",
    "REPORT2_PDF": "",
    "GOODS_FLAG": "L",
    "HNA_FLAG": "N",
    "REC_DIA_DTL_ID": 0,
    "LOCATION_MST_ID": 1,
    "REPORT_TYPE": 38,
    "REPORT_FORMAT": 247,
    "REPORT_VIDEO": "",
    "REPORT_IMAGE": "",
    "ECERT_FLAG": "N"
  }
]
