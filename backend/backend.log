[dotenv@17.2.3] injecting env (6) from .env -- tip: ✅ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  specify custom .env file path with { path: '/custom/path/.env' }
Syncing database...
[dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  suppress all logs with { quiet: true }
(node:22007) [SEQUELIZE0004] DeprecationWarning: A boolean value was passed to options.operatorsAliases. This is a no-op with v5 and should be removed.
(Use `node --trace-deprecation ...` to show where the warning was created)
Server is running on port 8080.
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'admins' AND TABLE_SCHEMA = 'diamond_inventory'
Executing (default): SHOW FULL COLUMNS FROM `admins`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'admins' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='diamond_inventory' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `admins` CHANGE `username` `username` VARCHAR(255) UNIQUE;
Executing (default): ALTER TABLE `admins` CHANGE `name` `name` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `role` `role` ENUM('admin', 'staff') DEFAULT 'admin';
Executing (default): ALTER TABLE `admins` CHANGE `password` `password` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `mobile` `mobile` VARCHAR(255) UNIQUE;
Executing (default): ALTER TABLE `admins` CHANGE `pin` `pin` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `otp` `otp` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `otp_expires` `otp_expires` DATETIME;
Executing (default): ALTER TABLE `admins` CHANGE `admin_password` `admin_password` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `failed_attempts` `failed_attempts` INTEGER DEFAULT 0;
Executing (default): ALTER TABLE `admins` CHANGE `lock_until` `lock_until` DATETIME;
Executing (default): ALTER TABLE `admins` CHANGE `createdAt` `createdAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `admins` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `admins` CHANGE `email` `email` VARCHAR(255) UNIQUE;
Executing (default): ALTER TABLE `admins` CHANGE `address` `address` VARCHAR(255);
Executing (default): ALTER TABLE `admins` CHANGE `staff_id` `staff_id` VARCHAR(255) UNIQUE;
Executing (default): SHOW INDEX FROM `admins`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'clients' AND TABLE_SCHEMA = 'diamond_inventory'
Executing (default): SHOW FULL COLUMNS FROM `clients`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'clients' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='diamond_inventory' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `clients` CHANGE `name` `name` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `clients` CHANGE `company_name` `company_name` VARCHAR(255);
Executing (default): ALTER TABLE `clients` CHANGE `country` `country` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `clients` CHANGE `address` `address` TEXT;
Executing (default): ALTER TABLE `clients` CHANGE `city` `city` VARCHAR(255);
Executing (default): ALTER TABLE `clients` CHANGE `contact_number` `contact_number` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `clients` CHANGE `email` `email` VARCHAR(255);
Executing (default): ALTER TABLE `clients` CHANGE `currency` `currency` VARCHAR(255) DEFAULT 'USD';
Executing (default): ALTER TABLE `clients` CHANGE `remarks` `remarks` TEXT;
Executing (default): ALTER TABLE `clients` CHANGE `created_by` `created_by` INTEGER;
Executing (default): ALTER TABLE `clients` CHANGE `createdAt` `createdAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `clients` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;
Executing (default): SHOW INDEX FROM `clients`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'diamonds' AND TABLE_SCHEMA = 'diamond_inventory'
Executing (default): SHOW FULL COLUMNS FROM `diamonds`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'diamonds' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='diamond_inventory' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `diamonds` CHANGE `certificate` `certificate` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `diamonds` CHANGE `certificate_date` `certificate_date` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `description` `description` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `shape` `shape` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `S_code` `S_code` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `measurements` `measurements` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `carat` `carat` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `color` `color` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `color_code` `color_code` INTEGER;
Executing (default): ALTER TABLE `diamonds` CHANGE `clarity` `clarity` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `clarity_code` `clarity_code` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `cut` `cut` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `lab` `lab` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `polish` `polish` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `symmetry` `symmetry` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `fluorescence` `fluorescence` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `crown_height` `crown_height` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `pavilion_depth` `pavilion_depth` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `girdle_thickness` `girdle_thickness` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `culet` `culet` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `total_depth_percent` `total_depth_percent` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `table_percent` `table_percent` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `comments` `comments` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `inscription` `inscription` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `price` `price` DECIMAL(10,2) NOT NULL;
Executing (default): ALTER TABLE `diamonds` CHANGE `quantity` `quantity` INTEGER DEFAULT 1;
Executing (default): ALTER TABLE `diamonds` CHANGE `status` `status` ENUM('in_stock', 'sold', 'in_cart') DEFAULT 'in_stock';
Executing (default): ALTER TABLE `diamonds` CHANGE `createdAt` `createdAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `diamonds` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `diamonds` CHANGE `discount` `discount` DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE `diamonds` CHANGE `growth_process` `growth_process` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `report_url` `report_url` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `diamond_type` `diamond_type` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `buyer_name` `buyer_name` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `buyer_country` `buyer_country` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `buyer_mobile` `buyer_mobile` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `sale_price` `sale_price` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `seller_country` `seller_country` VARCHAR(255);
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='diamonds' AND constraint_name = 'diamonds_ibfk_13' AND TABLE_SCHEMA = 'diamond_inventory';
Executing (default): ALTER TABLE `diamonds` DROP FOREIGN KEY `diamonds_ibfk_13`;
Executing (default): ALTER TABLE `diamonds` ADD FOREIGN KEY (`created_by`) REFERENCES `admins` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE `diamonds` CHANGE `company` `company` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `ratio` `ratio` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `shade` `shade` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `inclusion` `inclusion` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `key_to_symbols` `key_to_symbols` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `lab_comment` `lab_comment` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `member_comment` `member_comment` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `vendor_stock_no` `vendor_stock_no` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `item_url` `item_url` TEXT;
Executing (default): ALTER TABLE `diamonds` CHANGE `price_per_carat` `price_per_carat` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `total_price` `total_price` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `rap_discount` `rap_discount` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `seller_name` `seller_name` VARCHAR(255);
Executing (default): ALTER TABLE `diamonds` CHANGE `sale_type` `sale_type` ENUM('STOCK', 'ORDER') DEFAULT 'STOCK';
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='diamonds' AND constraint_name = 'diamonds_ibfk_14' AND TABLE_SCHEMA = 'diamond_inventory';
Executing (default): ALTER TABLE `diamonds` DROP FOREIGN KEY `diamonds_ibfk_14`;
Executing (default): ALTER TABLE `diamonds` ADD FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE `diamonds` CHANGE `currency` `currency` VARCHAR(255) DEFAULT 'USD';
Executing (default): ALTER TABLE `diamonds` CHANGE `exchange_rate` `exchange_rate` DECIMAL(10,2) DEFAULT 1;
Executing (default): ALTER TABLE `diamonds` CHANGE `commission_usd` `commission_usd` DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE `diamonds` CHANGE `commission_inr` `commission_inr` DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE `diamonds` CHANGE `final_price_usd` `final_price_usd` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `final_price_inr` `final_price_inr` DECIMAL(10,2);
Executing (default): ALTER TABLE `diamonds` CHANGE `sale_date` `sale_date` DATETIME;
Executing (default): ALTER TABLE `diamonds` CHANGE `sold_by` `sold_by` INTEGER;
Executing (default): SHOW INDEX FROM `diamonds`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'invoices' AND TABLE_SCHEMA = 'diamond_inventory'
Executing (default): SHOW FULL COLUMNS FROM `invoices`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'invoices' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='diamond_inventory' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `invoices` CHANGE `invoice_date` `invoice_date` DATETIME;
Executing (default): ALTER TABLE `invoices` CHANGE `customer_name` `customer_name` VARCHAR(255);
Executing (default): ALTER TABLE `invoices` CHANGE `total_amount` `total_amount` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `total_profit` `total_profit` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `createdAt` `createdAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `invoices` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='invoices' AND constraint_name = 'invoices_ibfk_2' AND TABLE_SCHEMA = 'diamond_inventory';
Executing (default): ALTER TABLE `invoices` DROP FOREIGN KEY `invoices_ibfk_2`;
Executing (default): ALTER TABLE `invoices` ADD FOREIGN KEY (`created_by`) REFERENCES `admins` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='invoices' AND constraint_name = 'invoices_ibfk_3' AND TABLE_SCHEMA = 'diamond_inventory';
Executing (default): ALTER TABLE `invoices` DROP FOREIGN KEY `invoices_ibfk_3`;
Executing (default): ALTER TABLE `invoices` ADD FOREIGN KEY (`client_id`) REFERENCES `clients` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE `invoices` CHANGE `currency` `currency` VARCHAR(255);
Executing (default): ALTER TABLE `invoices` CHANGE `exchange_rate` `exchange_rate` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `commission_total_usd` `commission_total_usd` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `commission_total_inr` `commission_total_inr` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `final_amount_usd` `final_amount_usd` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `final_amount_inr` `final_amount_inr` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `payment_status` `payment_status` ENUM('Pending', 'Paid', 'Partial', 'Overdue', 'Cancelled') DEFAULT 'Pending';
Executing (default): ALTER TABLE `invoices` CHANGE `remarks` `remarks` TEXT;
Executing (default): ALTER TABLE `invoices` CHANGE `payment_terms` `payment_terms` VARCHAR(255);
Executing (default): ALTER TABLE `invoices` CHANGE `due_days` `due_days` INTEGER DEFAULT 0;
Executing (default): ALTER TABLE `invoices` CHANGE `due_date` `due_date` DATETIME;
Executing (default): ALTER TABLE `invoices` CHANGE `paid_amount` `paid_amount` DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE `invoices` CHANGE `balance_due` `balance_due` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoices` CHANGE `payment_history` `payment_history` JSON;
Executing (default): SHOW INDEX FROM `invoices`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'invoice_items' AND TABLE_SCHEMA = 'diamond_inventory'
Executing (default): SHOW FULL COLUMNS FROM `invoice_items`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'invoice_items' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='diamond_inventory' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `invoice_items` CHANGE `quantity` `quantity` INTEGER DEFAULT 1;
Executing (default): ALTER TABLE `invoice_items` CHANGE `sale_price` `sale_price` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoice_items` CHANGE `commission` `commission` DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE `invoice_items` CHANGE `profit` `profit` DECIMAL(10,2);
Executing (default): ALTER TABLE `invoice_items` CHANGE `createdAt` `createdAt` DATETIME NOT NULL;
Executing (default): ALTER TABLE `invoice_items` CHANGE `updatedAt` `updatedAt` DATETIME NOT NULL;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='invoice_items' AND constraint_name = 'invoice_items_ibfk_223' AND TABLE_SCHEMA = 'diamond_inventory';
Executing (default): ALTER TABLE `invoice_items` DROP FOREIGN KEY `invoice_items_ibfk_223`;
Executing (default): ALTER TABLE `invoice_items` ADD FOREIGN KEY (`invoiceId`) REFERENCES `invoices` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'invoice_items' AND REFERENCED_TABLE_SCHEMA = 'diamond_inventory' AND REFERENCED_COLUMN_NAME = 'saleItemId') OR (TABLE_NAME = 'invoice_items' AND TABLE_SCHEMA = 'diamond_inventory' AND COLUMN_NAME = 'saleItemId' AND REFERENCED_TABLE_NAME IS NOT NULL)
Executing (default): ALTER TABLE `invoice_items` DROP FOREIGN KEY `invoice_items_ibfk_224`;
Executing (default): ALTER TABLE `invoice_items` DROP `saleItemId`;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='invoice_items' AND constraint_name = 'invoice_items_ibfk_224' AND TABLE_SCHEMA = 'diamond_inventory';
Failed to sync db: Constraint invoice_items_ibfk_224 on table invoice_items does not exist
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"109-58beCudCO2Xzty7kob4X44Qr+B4\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1714-lucXrYhgt+4fE/J3OO2EO3IxkiA\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"18b-vy7aLrde1qkYtYnFXPPrOHhW3MU\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] { staffId: 'ALL' }
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Executing (default): SELECT `invoice`.`id`, `invoice`.`invoice_date`, `invoice`.`customer_name`, `invoice`.`total_amount`, `invoice`.`total_profit`, `invoice`.`created_by`, `invoice`.`client_id`, `invoice`.`currency`, `invoice`.`exchange_rate`, `invoice`.`commission_total_usd`, `invoice`.`commission_total_inr`, `invoice`.`final_amount_usd`, `invoice`.`final_amount_inr`, `invoice`.`payment_status`, `invoice`.`remarks`, `invoice`.`payment_terms`, `invoice`.`due_days`, `invoice`.`due_date`, `invoice`.`paid_amount`, `invoice`.`balance_due`, `invoice`.`payment_history`, `invoice`.`createdAt`, `invoice`.`updatedAt`, `items`.`id` AS `items.id`, `items`.`quantity` AS `items.quantity`, `items`.`sale_price` AS `items.sale_price`, `items`.`price` AS `items.price`, `items`.`commission` AS `items.commission`, `items`.`profit` AS `items.profit`, `items`.`createdAt` AS `items.createdAt`, `items`.`updatedAt` AS `items.updatedAt`, `items`.`invoiceId` AS `items.invoiceId`, `items`.`diamondId` AS `items.diamondId`, `items->diamond`.`id` AS `items.diamond.id`, `items->diamond`.`created_by` AS `items.diamond.created_by`, `items->diamond`.`certificate` AS `items.diamond.certificate`, `items->diamond`.`certificate_date` AS `items.diamond.certificate_date`, `items->diamond`.`description` AS `items.diamond.description`, `items->diamond`.`ratio` AS `items.diamond.ratio`, `items->diamond`.`shade` AS `items.diamond.shade`, `items->diamond`.`inclusion` AS `items.diamond.inclusion`, `items->diamond`.`key_to_symbols` AS `items.diamond.key_to_symbols`, `items->diamond`.`lab_comment` AS `items.diamond.lab_comment`, `items->diamond`.`member_comment` AS `items.diamond.member_comment`, `items->diamond`.`vendor_stock_no` AS `items.diamond.vendor_stock_no`, `items->diamond`.`item_url` AS `items.diamond.item_url`, `items->diamond`.`shape` AS `items.diamond.shape`, `items->diamond`.`S_code` AS `items.diamond.S_code`, `items->diamond`.`measurements` AS `items.diamond.measurements`, `items->diamond`.`carat` AS `items.diamond.carat`, `items->diamond`.`color` AS `items.diamond.color`, `items->diamond`.`color_code` AS `items.diamond.color_code`, `items->diamond`.`clarity` AS `items.diamond.clarity`, `items->diamond`.`clarity_code` AS `items.diamond.clarity_code`, `items->diamond`.`cut` AS `items.diamond.cut`, `items->diamond`.`lab` AS `items.diamond.lab`, `items->diamond`.`polish` AS `items.diamond.polish`, `items->diamond`.`symmetry` AS `items.diamond.symmetry`, `items->diamond`.`fluorescence` AS `items.diamond.fluorescence`, `items->diamond`.`crown_height` AS `items.diamond.crown_height`, `items->diamond`.`pavilion_depth` AS `items.diamond.pavilion_depth`, `items->diamond`.`girdle_thickness` AS `items.diamond.girdle_thickness`, `items->diamond`.`culet` AS `items.diamond.culet`, `items->diamond`.`total_depth_percent` AS `items.diamond.total_depth_percent`, `items->diamond`.`table_percent` AS `items.diamond.table_percent`, `items->diamond`.`comments` AS `items.diamond.comments`, `items->diamond`.`inscription` AS `items.diamond.inscription`, `items->diamond`.`price` AS `items.diamond.price`, `items->diamond`.`quantity` AS `items.diamond.quantity`, `items->diamond`.`discount` AS `items.diamond.discount`, `items->diamond`.`status` AS `items.diamond.status`, `items->diamond`.`diamond_type` AS `items.diamond.diamond_type`, `items->diamond`.`buyer_name` AS `items.diamond.buyer_name`, `items->diamond`.`buyer_country` AS `items.diamond.buyer_country`, `items->diamond`.`buyer_mobile` AS `items.diamond.buyer_mobile`, `items->diamond`.`sale_price` AS `items.diamond.sale_price`, `items->diamond`.`sold_by` AS `items.diamond.sold_by`, `items->diamond`.`growth_process` AS `items.diamond.growth_process`, `items->diamond`.`report_url` AS `items.diamond.report_url`, `items->diamond`.`seller_country` AS `items.diamond.seller_country`, `items->diamond`.`company` AS `items.diamond.company`, `items->diamond`.`price_per_carat` AS `items.diamond.price_per_carat`, `items->diamond`.`total_price` AS `items.diamond.total_price`, `items->diamond`.`rap_discount` AS `items.diamond.rap_discount`, `items->diamond`.`seller_name` AS `items.diamond.seller_name`, `items->diamond`.`sale_type` AS `items.diamond.sale_type`, `items->diamond`.`client_id` AS `items.diamond.client_id`, `items->diamond`.`currency` AS `items.diamond.currency`, `items->diamond`.`exchange_rate` AS `items.diamond.exchange_rate`, `items->diamond`.`commission_usd` AS `items.diamond.commission_usd`, `items->diamond`.`commission_inr` AS `items.diamond.commission_inr`, `items->diamond`.`final_price_usd` AS `items.diamond.final_price_usd`, `items->diamond`.`final_price_inr` AS `items.diamond.final_price_inr`, `items->diamond`.`sale_date` AS `items.diamond.sale_date`, `items->diamond`.`createdAt` AS `items.diamond.createdAt`, `items->diamond`.`updatedAt` AS `items.diamond.updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`role` AS `creator.role` FROM `invoices` AS `invoice` LEFT OUTER JOIN `invoice_items` AS `items` ON `invoice`.`id` = `items`.`invoiceId` LEFT OUTER JOIN `diamonds` AS `items->diamond` ON `items`.`diamondId` = `items->diamond`.`id` LEFT OUTER JOIN `admins` AS `creator` ON `invoice`.`created_by` = `creator`.`id` ORDER BY `invoice`.`createdAt` DESC;
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1c4-cqsubtyjX07nXNjiLyuGtltXH9Q\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"16dd-ahsd3kkYDuVnfrbN+jn6/BCiMng\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `invoice`.`id`, `invoice`.`invoice_date`, `invoice`.`customer_name`, `invoice`.`total_amount`, `invoice`.`total_profit`, `invoice`.`created_by`, `invoice`.`client_id`, `invoice`.`currency`, `invoice`.`exchange_rate`, `invoice`.`commission_total_usd`, `invoice`.`commission_total_inr`, `invoice`.`final_amount_usd`, `invoice`.`final_amount_inr`, `invoice`.`payment_status`, `invoice`.`remarks`, `invoice`.`payment_terms`, `invoice`.`due_days`, `invoice`.`due_date`, `invoice`.`paid_amount`, `invoice`.`balance_due`, `invoice`.`payment_history`, `invoice`.`createdAt`, `invoice`.`updatedAt`, `items`.`id` AS `items.id`, `items`.`quantity` AS `items.quantity`, `items`.`sale_price` AS `items.sale_price`, `items`.`price` AS `items.price`, `items`.`commission` AS `items.commission`, `items`.`profit` AS `items.profit`, `items`.`createdAt` AS `items.createdAt`, `items`.`updatedAt` AS `items.updatedAt`, `items`.`invoiceId` AS `items.invoiceId`, `items`.`diamondId` AS `items.diamondId`, `items->diamond`.`id` AS `items.diamond.id`, `items->diamond`.`created_by` AS `items.diamond.created_by`, `items->diamond`.`certificate` AS `items.diamond.certificate`, `items->diamond`.`certificate_date` AS `items.diamond.certificate_date`, `items->diamond`.`description` AS `items.diamond.description`, `items->diamond`.`ratio` AS `items.diamond.ratio`, `items->diamond`.`shade` AS `items.diamond.shade`, `items->diamond`.`inclusion` AS `items.diamond.inclusion`, `items->diamond`.`key_to_symbols` AS `items.diamond.key_to_symbols`, `items->diamond`.`lab_comment` AS `items.diamond.lab_comment`, `items->diamond`.`member_comment` AS `items.diamond.member_comment`, `items->diamond`.`vendor_stock_no` AS `items.diamond.vendor_stock_no`, `items->diamond`.`item_url` AS `items.diamond.item_url`, `items->diamond`.`shape` AS `items.diamond.shape`, `items->diamond`.`S_code` AS `items.diamond.S_code`, `items->diamond`.`measurements` AS `items.diamond.measurements`, `items->diamond`.`carat` AS `items.diamond.carat`, `items->diamond`.`color` AS `items.diamond.color`, `items->diamond`.`color_code` AS `items.diamond.color_code`, `items->diamond`.`clarity` AS `items.diamond.clarity`, `items->diamond`.`clarity_code` AS `items.diamond.clarity_code`, `items->diamond`.`cut` AS `items.diamond.cut`, `items->diamond`.`lab` AS `items.diamond.lab`, `items->diamond`.`polish` AS `items.diamond.polish`, `items->diamond`.`symmetry` AS `items.diamond.symmetry`, `items->diamond`.`fluorescence` AS `items.diamond.fluorescence`, `items->diamond`.`crown_height` AS `items.diamond.crown_height`, `items->diamond`.`pavilion_depth` AS `items.diamond.pavilion_depth`, `items->diamond`.`girdle_thickness` AS `items.diamond.girdle_thickness`, `items->diamond`.`culet` AS `items.diamond.culet`, `items->diamond`.`total_depth_percent` AS `items.diamond.total_depth_percent`, `items->diamond`.`table_percent` AS `items.diamond.table_percent`, `items->diamond`.`comments` AS `items.diamond.comments`, `items->diamond`.`inscription` AS `items.diamond.inscription`, `items->diamond`.`price` AS `items.diamond.price`, `items->diamond`.`quantity` AS `items.diamond.quantity`, `items->diamond`.`discount` AS `items.diamond.discount`, `items->diamond`.`status` AS `items.diamond.status`, `items->diamond`.`diamond_type` AS `items.diamond.diamond_type`, `items->diamond`.`buyer_name` AS `items.diamond.buyer_name`, `items->diamond`.`buyer_country` AS `items.diamond.buyer_country`, `items->diamond`.`buyer_mobile` AS `items.diamond.buyer_mobile`, `items->diamond`.`sale_price` AS `items.diamond.sale_price`, `items->diamond`.`sold_by` AS `items.diamond.sold_by`, `items->diamond`.`growth_process` AS `items.diamond.growth_process`, `items->diamond`.`report_url` AS `items.diamond.report_url`, `items->diamond`.`seller_country` AS `items.diamond.seller_country`, `items->diamond`.`company` AS `items.diamond.company`, `items->diamond`.`price_per_carat` AS `items.diamond.price_per_carat`, `items->diamond`.`total_price` AS `items.diamond.total_price`, `items->diamond`.`rap_discount` AS `items.diamond.rap_discount`, `items->diamond`.`seller_name` AS `items.diamond.seller_name`, `items->diamond`.`sale_type` AS `items.diamond.sale_type`, `items->diamond`.`client_id` AS `items.diamond.client_id`, `items->diamond`.`currency` AS `items.diamond.currency`, `items->diamond`.`exchange_rate` AS `items.diamond.exchange_rate`, `items->diamond`.`commission_usd` AS `items.diamond.commission_usd`, `items->diamond`.`commission_inr` AS `items.diamond.commission_inr`, `items->diamond`.`final_price_usd` AS `items.diamond.final_price_usd`, `items->diamond`.`final_price_inr` AS `items.diamond.final_price_inr`, `items->diamond`.`sale_date` AS `items.diamond.sale_date`, `items->diamond`.`createdAt` AS `items.diamond.createdAt`, `items->diamond`.`updatedAt` AS `items.diamond.updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`role` AS `creator.role` FROM `invoices` AS `invoice` LEFT OUTER JOIN `invoice_items` AS `items` ON `invoice`.`id` = `items`.`invoiceId` LEFT OUTER JOIN `diamonds` AS `items->diamond` ON `items`.`diamondId` = `items->diamond`.`id` LEFT OUTER JOIN `admins` AS `creator` ON `invoice`.`created_by` = `creator`.`id` ORDER BY `invoice`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"135-BNr1U3mmxPP5X+Vlpngi0iXu9qc\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] { staffId: 'ALL' }
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9"}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] { staffId: '1' }
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL AND d.created_by = '1'
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL AND d.sold_by = '1'
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"135-BNr1U3mmxPP5X+Vlpngi0iXu9qc\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] { staffId: 'ALL' }
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"16dd-ahsd3kkYDuVnfrbN+jn6/BCiMng\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `invoice`.`id`, `invoice`.`invoice_date`, `invoice`.`customer_name`, `invoice`.`total_amount`, `invoice`.`total_profit`, `invoice`.`created_by`, `invoice`.`client_id`, `invoice`.`currency`, `invoice`.`exchange_rate`, `invoice`.`commission_total_usd`, `invoice`.`commission_total_inr`, `invoice`.`final_amount_usd`, `invoice`.`final_amount_inr`, `invoice`.`payment_status`, `invoice`.`remarks`, `invoice`.`payment_terms`, `invoice`.`due_days`, `invoice`.`due_date`, `invoice`.`paid_amount`, `invoice`.`balance_due`, `invoice`.`payment_history`, `invoice`.`createdAt`, `invoice`.`updatedAt`, `items`.`id` AS `items.id`, `items`.`quantity` AS `items.quantity`, `items`.`sale_price` AS `items.sale_price`, `items`.`price` AS `items.price`, `items`.`commission` AS `items.commission`, `items`.`profit` AS `items.profit`, `items`.`createdAt` AS `items.createdAt`, `items`.`updatedAt` AS `items.updatedAt`, `items`.`invoiceId` AS `items.invoiceId`, `items`.`diamondId` AS `items.diamondId`, `items->diamond`.`id` AS `items.diamond.id`, `items->diamond`.`created_by` AS `items.diamond.created_by`, `items->diamond`.`certificate` AS `items.diamond.certificate`, `items->diamond`.`certificate_date` AS `items.diamond.certificate_date`, `items->diamond`.`description` AS `items.diamond.description`, `items->diamond`.`ratio` AS `items.diamond.ratio`, `items->diamond`.`shade` AS `items.diamond.shade`, `items->diamond`.`inclusion` AS `items.diamond.inclusion`, `items->diamond`.`key_to_symbols` AS `items.diamond.key_to_symbols`, `items->diamond`.`lab_comment` AS `items.diamond.lab_comment`, `items->diamond`.`member_comment` AS `items.diamond.member_comment`, `items->diamond`.`vendor_stock_no` AS `items.diamond.vendor_stock_no`, `items->diamond`.`item_url` AS `items.diamond.item_url`, `items->diamond`.`shape` AS `items.diamond.shape`, `items->diamond`.`S_code` AS `items.diamond.S_code`, `items->diamond`.`measurements` AS `items.diamond.measurements`, `items->diamond`.`carat` AS `items.diamond.carat`, `items->diamond`.`color` AS `items.diamond.color`, `items->diamond`.`color_code` AS `items.diamond.color_code`, `items->diamond`.`clarity` AS `items.diamond.clarity`, `items->diamond`.`clarity_code` AS `items.diamond.clarity_code`, `items->diamond`.`cut` AS `items.diamond.cut`, `items->diamond`.`lab` AS `items.diamond.lab`, `items->diamond`.`polish` AS `items.diamond.polish`, `items->diamond`.`symmetry` AS `items.diamond.symmetry`, `items->diamond`.`fluorescence` AS `items.diamond.fluorescence`, `items->diamond`.`crown_height` AS `items.diamond.crown_height`, `items->diamond`.`pavilion_depth` AS `items.diamond.pavilion_depth`, `items->diamond`.`girdle_thickness` AS `items.diamond.girdle_thickness`, `items->diamond`.`culet` AS `items.diamond.culet`, `items->diamond`.`total_depth_percent` AS `items.diamond.total_depth_percent`, `items->diamond`.`table_percent` AS `items.diamond.table_percent`, `items->diamond`.`comments` AS `items.diamond.comments`, `items->diamond`.`inscription` AS `items.diamond.inscription`, `items->diamond`.`price` AS `items.diamond.price`, `items->diamond`.`quantity` AS `items.diamond.quantity`, `items->diamond`.`discount` AS `items.diamond.discount`, `items->diamond`.`status` AS `items.diamond.status`, `items->diamond`.`diamond_type` AS `items.diamond.diamond_type`, `items->diamond`.`buyer_name` AS `items.diamond.buyer_name`, `items->diamond`.`buyer_country` AS `items.diamond.buyer_country`, `items->diamond`.`buyer_mobile` AS `items.diamond.buyer_mobile`, `items->diamond`.`sale_price` AS `items.diamond.sale_price`, `items->diamond`.`sold_by` AS `items.diamond.sold_by`, `items->diamond`.`growth_process` AS `items.diamond.growth_process`, `items->diamond`.`report_url` AS `items.diamond.report_url`, `items->diamond`.`seller_country` AS `items.diamond.seller_country`, `items->diamond`.`company` AS `items.diamond.company`, `items->diamond`.`price_per_carat` AS `items.diamond.price_per_carat`, `items->diamond`.`total_price` AS `items.diamond.total_price`, `items->diamond`.`rap_discount` AS `items.diamond.rap_discount`, `items->diamond`.`seller_name` AS `items.diamond.seller_name`, `items->diamond`.`sale_type` AS `items.diamond.sale_type`, `items->diamond`.`client_id` AS `items.diamond.client_id`, `items->diamond`.`currency` AS `items.diamond.currency`, `items->diamond`.`exchange_rate` AS `items.diamond.exchange_rate`, `items->diamond`.`commission_usd` AS `items.diamond.commission_usd`, `items->diamond`.`commission_inr` AS `items.diamond.commission_inr`, `items->diamond`.`final_price_usd` AS `items.diamond.final_price_usd`, `items->diamond`.`final_price_inr` AS `items.diamond.final_price_inr`, `items->diamond`.`sale_date` AS `items.diamond.sale_date`, `items->diamond`.`createdAt` AS `items.diamond.createdAt`, `items->diamond`.`updatedAt` AS `items.diamond.updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`role` AS `creator.role` FROM `invoices` AS `invoice` LEFT OUTER JOIN `invoice_items` AS `items` ON `invoice`.`id` = `items`.`invoiceId` LEFT OUTER JOIN `diamonds` AS `items->diamond` ON `items`.`diamondId` = `items->diamond`.`id` LEFT OUTER JOIN `admins` AS `creator` ON `invoice`.`created_by` = `creator`.`id` ORDER BY `invoice`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"16dd-ahsd3kkYDuVnfrbN+jn6/BCiMng\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `invoice`.`id`, `invoice`.`invoice_date`, `invoice`.`customer_name`, `invoice`.`total_amount`, `invoice`.`total_profit`, `invoice`.`created_by`, `invoice`.`client_id`, `invoice`.`currency`, `invoice`.`exchange_rate`, `invoice`.`commission_total_usd`, `invoice`.`commission_total_inr`, `invoice`.`final_amount_usd`, `invoice`.`final_amount_inr`, `invoice`.`payment_status`, `invoice`.`remarks`, `invoice`.`payment_terms`, `invoice`.`due_days`, `invoice`.`due_date`, `invoice`.`paid_amount`, `invoice`.`balance_due`, `invoice`.`payment_history`, `invoice`.`createdAt`, `invoice`.`updatedAt`, `items`.`id` AS `items.id`, `items`.`quantity` AS `items.quantity`, `items`.`sale_price` AS `items.sale_price`, `items`.`price` AS `items.price`, `items`.`commission` AS `items.commission`, `items`.`profit` AS `items.profit`, `items`.`createdAt` AS `items.createdAt`, `items`.`updatedAt` AS `items.updatedAt`, `items`.`invoiceId` AS `items.invoiceId`, `items`.`diamondId` AS `items.diamondId`, `items->diamond`.`id` AS `items.diamond.id`, `items->diamond`.`created_by` AS `items.diamond.created_by`, `items->diamond`.`certificate` AS `items.diamond.certificate`, `items->diamond`.`certificate_date` AS `items.diamond.certificate_date`, `items->diamond`.`description` AS `items.diamond.description`, `items->diamond`.`ratio` AS `items.diamond.ratio`, `items->diamond`.`shade` AS `items.diamond.shade`, `items->diamond`.`inclusion` AS `items.diamond.inclusion`, `items->diamond`.`key_to_symbols` AS `items.diamond.key_to_symbols`, `items->diamond`.`lab_comment` AS `items.diamond.lab_comment`, `items->diamond`.`member_comment` AS `items.diamond.member_comment`, `items->diamond`.`vendor_stock_no` AS `items.diamond.vendor_stock_no`, `items->diamond`.`item_url` AS `items.diamond.item_url`, `items->diamond`.`shape` AS `items.diamond.shape`, `items->diamond`.`S_code` AS `items.diamond.S_code`, `items->diamond`.`measurements` AS `items.diamond.measurements`, `items->diamond`.`carat` AS `items.diamond.carat`, `items->diamond`.`color` AS `items.diamond.color`, `items->diamond`.`color_code` AS `items.diamond.color_code`, `items->diamond`.`clarity` AS `items.diamond.clarity`, `items->diamond`.`clarity_code` AS `items.diamond.clarity_code`, `items->diamond`.`cut` AS `items.diamond.cut`, `items->diamond`.`lab` AS `items.diamond.lab`, `items->diamond`.`polish` AS `items.diamond.polish`, `items->diamond`.`symmetry` AS `items.diamond.symmetry`, `items->diamond`.`fluorescence` AS `items.diamond.fluorescence`, `items->diamond`.`crown_height` AS `items.diamond.crown_height`, `items->diamond`.`pavilion_depth` AS `items.diamond.pavilion_depth`, `items->diamond`.`girdle_thickness` AS `items.diamond.girdle_thickness`, `items->diamond`.`culet` AS `items.diamond.culet`, `items->diamond`.`total_depth_percent` AS `items.diamond.total_depth_percent`, `items->diamond`.`table_percent` AS `items.diamond.table_percent`, `items->diamond`.`comments` AS `items.diamond.comments`, `items->diamond`.`inscription` AS `items.diamond.inscription`, `items->diamond`.`price` AS `items.diamond.price`, `items->diamond`.`quantity` AS `items.diamond.quantity`, `items->diamond`.`discount` AS `items.diamond.discount`, `items->diamond`.`status` AS `items.diamond.status`, `items->diamond`.`diamond_type` AS `items.diamond.diamond_type`, `items->diamond`.`buyer_name` AS `items.diamond.buyer_name`, `items->diamond`.`buyer_country` AS `items.diamond.buyer_country`, `items->diamond`.`buyer_mobile` AS `items.diamond.buyer_mobile`, `items->diamond`.`sale_price` AS `items.diamond.sale_price`, `items->diamond`.`sold_by` AS `items.diamond.sold_by`, `items->diamond`.`growth_process` AS `items.diamond.growth_process`, `items->diamond`.`report_url` AS `items.diamond.report_url`, `items->diamond`.`seller_country` AS `items.diamond.seller_country`, `items->diamond`.`company` AS `items.diamond.company`, `items->diamond`.`price_per_carat` AS `items.diamond.price_per_carat`, `items->diamond`.`total_price` AS `items.diamond.total_price`, `items->diamond`.`rap_discount` AS `items.diamond.rap_discount`, `items->diamond`.`seller_name` AS `items.diamond.seller_name`, `items->diamond`.`sale_type` AS `items.diamond.sale_type`, `items->diamond`.`client_id` AS `items.diamond.client_id`, `items->diamond`.`currency` AS `items.diamond.currency`, `items->diamond`.`exchange_rate` AS `items.diamond.exchange_rate`, `items->diamond`.`commission_usd` AS `items.diamond.commission_usd`, `items->diamond`.`commission_inr` AS `items.diamond.commission_inr`, `items->diamond`.`final_price_usd` AS `items.diamond.final_price_usd`, `items->diamond`.`final_price_inr` AS `items.diamond.final_price_inr`, `items->diamond`.`sale_date` AS `items.diamond.sale_date`, `items->diamond`.`createdAt` AS `items.diamond.createdAt`, `items->diamond`.`updatedAt` AS `items.diamond.updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`role` AS `creator.role` FROM `invoices` AS `invoice` LEFT OUTER JOIN `invoice_items` AS `items` ON `invoice`.`id` = `items`.`invoiceId` LEFT OUTER JOIN `diamonds` AS `items->diamond` ON `items`.`diamondId` = `items->diamond`.`id` LEFT OUTER JOIN `admins` AS `creator` ON `invoice`.`created_by` = `creator`.`id` ORDER BY `invoice`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1c4-cqsubtyjX07nXNjiLyuGtltXH9Q\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"18b-vy7aLrde1qkYtYnFXPPrOHhW3MU\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] {}
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1c4-cqsubtyjX07nXNjiLyuGtltXH9Q\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"135-BNr1U3mmxPP5X+Vlpngi0iXu9qc\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Summary Request | User: 1 | Role: admin | Query: [Object: null prototype] {}
Executing (default): SELECT 
                d.created_by as staff_id,
                a.name as staff_name,
                a.role,
                COUNT(d.id) as total_count,
                SUM(d.price * (1 - COALESCE(d.discount, 0) / 100)) as total_expense
            FROM diamonds d
            LEFT JOIN admins a ON d.created_by = a.id
            WHERE d.status IN ('in_stock', 'sold', 'in_cart') AND d.created_by IS NOT NULL
            GROUP BY d.created_by
Executing (default): SELECT 
                d.sold_by as staff_id,
                a.name as staff_name,
                a.role,
                SUM(d.sale_price - (d.price * (1 - COALESCE(d.discount, 0) / 100))) as total_profit
            FROM diamonds d
            LEFT JOIN admins a ON d.sold_by = a.id
            WHERE d.status = 'sold' AND d.sale_price > 0 AND d.sold_by IS NOT NULL
            GROUP BY d.sold_by
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1c4-cqsubtyjX07nXNjiLyuGtltXH9Q\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"d-U8tVywbjWm6OCJWeafVWZfLI5mU\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `created_by`, `createdAt`, `updatedAt` FROM `companies` AS `company` ORDER BY `company`.`name` ASC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"1c4-cqsubtyjX07nXNjiLyuGtltXH9Q\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `mobile`, `address`, `staff_id`, `role`, `createdAt`, `failed_attempts` FROM `admins` AS `admin` ORDER BY `admin`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"600-tqNfHaiimK+qpZ0KDBv87LOGzow\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Fetch All Diamonds | User: 1 | Role: admin | Query: [Object: null prototype] {
  certificate: '',
  status: 'in_stock',
  shape: '',
  clarity: '',
  color: '',
  company: ''
}
Executing (default): SELECT `diamond`.`id`, `diamond`.`created_by`, `diamond`.`certificate`, `diamond`.`certificate_date`, `diamond`.`description`, `diamond`.`ratio`, `diamond`.`shade`, `diamond`.`inclusion`, `diamond`.`key_to_symbols`, `diamond`.`lab_comment`, `diamond`.`member_comment`, `diamond`.`vendor_stock_no`, `diamond`.`item_url`, `diamond`.`shape`, `diamond`.`S_code`, `diamond`.`measurements`, `diamond`.`carat`, `diamond`.`color`, `diamond`.`color_code`, `diamond`.`clarity`, `diamond`.`clarity_code`, `diamond`.`cut`, `diamond`.`lab`, `diamond`.`polish`, `diamond`.`symmetry`, `diamond`.`fluorescence`, `diamond`.`crown_height`, `diamond`.`pavilion_depth`, `diamond`.`girdle_thickness`, `diamond`.`culet`, `diamond`.`total_depth_percent`, `diamond`.`table_percent`, `diamond`.`comments`, `diamond`.`inscription`, `diamond`.`price`, `diamond`.`quantity`, `diamond`.`discount`, `diamond`.`status`, `diamond`.`diamond_type`, `diamond`.`buyer_name`, `diamond`.`buyer_country`, `diamond`.`buyer_mobile`, `diamond`.`sale_price`, `diamond`.`sold_by`, `diamond`.`growth_process`, `diamond`.`report_url`, `diamond`.`seller_country`, `diamond`.`company`, `diamond`.`price_per_carat`, `diamond`.`total_price`, `diamond`.`rap_discount`, `diamond`.`seller_name`, `diamond`.`sale_type`, `diamond`.`client_id`, `diamond`.`currency`, `diamond`.`exchange_rate`, `diamond`.`commission_usd`, `diamond`.`commission_inr`, `diamond`.`final_price_usd`, `diamond`.`final_price_inr`, `diamond`.`sale_date`, `diamond`.`createdAt`, `diamond`.`updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`staff_id` AS `creator.staff_id` FROM `diamonds` AS `diamond` LEFT OUTER JOIN `admins` AS `creator` ON `diamond`.`created_by` = `creator`.`id` WHERE `diamond`.`status` = 'in_stock' ORDER BY `diamond`.`createdAt` DESC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"d-U8tVywbjWm6OCJWeafVWZfLI5mU\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Executing (default): SELECT `id`, `name`, `created_by`, `createdAt`, `updatedAt` FROM `companies` AS `company` ORDER BY `company`.`name` ASC;
Auth Middleware | Headers: {"host":"localhost:8080","connection":"keep-alive","x-access-token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA","sec-ch-ua-platform":"\"macOS\"","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","accept":"application/json, text/plain, */*","sec-ch-ua":"\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"","sec-ch-ua-mobile":"?0","origin":"http://localhost:5173","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:5173/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","if-none-match":"W/\"60f-fNgOCwoOpOMvyT2vb25HfRVTrVI\""}
Auth Middleware | Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwibmFtZSI6IlN1cGVyIEFkbWluIiwiaWF0IjoxNzY5MzQ2NjY4LCJleHAiOjE3Njk0MzMwNjh9.CXNqZzPSeeGFyWUG3MFMweNzlGEQ9hgdgZqREmCoblA
Fetch All Diamonds | User: 1 | Role: admin | Query: [Object: null prototype] {
  certificate: '',
  status: 'in_stock',
  shape: '',
  clarity: '',
  color: '',
  company: ''
}
Executing (default): SELECT `diamond`.`id`, `diamond`.`created_by`, `diamond`.`certificate`, `diamond`.`certificate_date`, `diamond`.`description`, `diamond`.`ratio`, `diamond`.`shade`, `diamond`.`inclusion`, `diamond`.`key_to_symbols`, `diamond`.`lab_comment`, `diamond`.`member_comment`, `diamond`.`vendor_stock_no`, `diamond`.`item_url`, `diamond`.`shape`, `diamond`.`S_code`, `diamond`.`measurements`, `diamond`.`carat`, `diamond`.`color`, `diamond`.`color_code`, `diamond`.`clarity`, `diamond`.`clarity_code`, `diamond`.`cut`, `diamond`.`lab`, `diamond`.`polish`, `diamond`.`symmetry`, `diamond`.`fluorescence`, `diamond`.`crown_height`, `diamond`.`pavilion_depth`, `diamond`.`girdle_thickness`, `diamond`.`culet`, `diamond`.`total_depth_percent`, `diamond`.`table_percent`, `diamond`.`comments`, `diamond`.`inscription`, `diamond`.`price`, `diamond`.`quantity`, `diamond`.`discount`, `diamond`.`status`, `diamond`.`diamond_type`, `diamond`.`buyer_name`, `diamond`.`buyer_country`, `diamond`.`buyer_mobile`, `diamond`.`sale_price`, `diamond`.`sold_by`, `diamond`.`growth_process`, `diamond`.`report_url`, `diamond`.`seller_country`, `diamond`.`company`, `diamond`.`price_per_carat`, `diamond`.`total_price`, `diamond`.`rap_discount`, `diamond`.`seller_name`, `diamond`.`sale_type`, `diamond`.`client_id`, `diamond`.`currency`, `diamond`.`exchange_rate`, `diamond`.`commission_usd`, `diamond`.`commission_inr`, `diamond`.`final_price_usd`, `diamond`.`final_price_inr`, `diamond`.`sale_date`, `diamond`.`createdAt`, `diamond`.`updatedAt`, `creator`.`id` AS `creator.id`, `creator`.`name` AS `creator.name`, `creator`.`staff_id` AS `creator.staff_id` FROM `diamonds` AS `diamond` LEFT OUTER JOIN `admins` AS `creator` ON `diamond`.`created_by` = `creator`.`id` WHERE `diamond`.`status` = 'in_stock' ORDER BY `diamond`.`createdAt` DESC;
